---
title: 'text_to_sql'
---

Generates SQL from a given prompt.

<CodeGroup>
```python OpenAI
# ðŸ“¦ Package: morph_lib.ai.openai.code_generation
# ðŸ› ï¸ Function: text_to_sql

def text_to_sql(
    prompt: str,
    api_key: str,
    table_names: List[str],
    model: Optional[str] = "gpt-4o",
    connection: Optional[str] = None,
    schema_name: Optional[str] = None,
) -> TextConversionResponse:
```

```python Anthropic
# ðŸ“¦ Package: morph_lib.ai.anthropic.code_generation
# ðŸ› ï¸ Function: text_to_sql

def text_to_sql(
    prompt: str,
    api_key: str,
    table_names: List[str],
    model: Optional[str] = "claude-3-5-haiku-latest",
    max_tokens: Optional[int] = 1024,
    connection: Optional[str] = None,
    schema_name: Optional[str] = None,
) -> TextConversionResponse:
```

```python Azure
# ðŸ“¦ Package: morph_lib.ai.azure.code_generation
# ðŸ› ï¸ Function: text_to_sql

def text_to_sql(
    prompt: str,
    api_key: str,
    table_names: List[str],
    azure_endpoint: str,
    deployment_name: Optional[str] = "gpt4",
    api_version: Optional[str] = "2024-10-01-preview",
    connection: Optional[str] = None,
    schema_name: Optional[str] = None,
) -> TextConversionResponse:
```

```python Groq
# ðŸ“¦ Package: morph_lib.ai.groq.code_generation
# ðŸ› ï¸ Function: text_to_sql

def text_to_sql(
    prompt: str,
    api_key: str,
    table_names: List[str],
    model: Optional[str] = "llama-3.1-70b-versatile",
    connection: Optional[str] = None,
    schema_name: Optional[str] = None,
) -> TextConversionResponse:
```
</CodeGroup>

### Parameters

These are the parameters for OpenAI. Set the authentication parameters for other models as appropriate from the function definitions above.

<ParamField body="prompt" type="string" required>
Prompt
</ParamField>

<ParamField body="api_key" type="string" required>
API key for using the LLM model
</ParamField>

<ParamField body="table_names" type="list" required>
List of table names used for generation
</ParamField>

<ParamField body="model" type="string" optional>
LLM model to use
</ParamField>

<ParamField body="connection" type="string" optional>
Connection used for generation
</ParamField>

<ParamField body="schema_name" type="string" optional>
Schema name used for generation
</ParamField>

### Example

```python
from morph_lib.ai.openai import text_to_sql
import os

@morph.func
def func_name(context):
    sql = text_to_sql(
		prompt,
		os.environ["OPENAI_API_KEY"],
		["user"],
		"gpt-4o",
	)
	return execute_sql(sql)
```
