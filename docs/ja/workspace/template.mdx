---
title: 'ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ'
---

Morphã«ã¯ã€SQLã‚„Pythonã®ã‚³ãƒ¼ãƒ‰ã‚’ã‚ˆã‚Šç°¡å˜ã«è¨˜è¿°ã™ã‚‹ãŸã‚ã«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã€‚
ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«ã¯2ç¨®é¡å­˜åœ¨ã—ã¦ã„ã¾ã™ã€‚

## æ¨™æº–ã§ç”¨æ„ã•ã‚Œã¦ã„ã‚‹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ä¸Šã§é–‹ãã¨Morphãƒãƒ¼ãƒ ãŒä½œæˆã—ãŸæ¨™æº–ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒå³ã®ã‚µã‚¤ãƒ‰ãƒãƒ¼ã‹ã‚‰ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
ã“ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯ã€Morphã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®ã‚¹ãƒ‹ãƒšãƒƒãƒˆã®å½¹å‰²ã‚’ã—ã¦ãŠã‚Šã€ã‚³ãƒ”ãƒ¼ã‚’ã™ã‚‹ã“ã¨ã§ã™ãã«åˆ†æéƒ¨åˆ†ã®å®Ÿè£…ã‚’é–‹å§‹ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

<img
  src="/assets/images/docs/workspace-template.png"
  alt="Workspace Template"
/>

<Note>
ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®è¦æœ›ãŒã‚ã‚‹å ´åˆã«ã¯ã€`shibata@morphdb.io`ã¾ã§æ˜¯éãƒªã‚¯ã‚¨ã‚¹ãƒˆãã ã•ã„ï¼
</Note>

## è‡ªä½œãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

`templates`ãƒ•ã‚©ãƒ«ãƒ€ã§ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦ç®¡ç†ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ä½œæˆã—ãŸãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‹ã‚‰`morph create`ã‚³ãƒãƒ³ãƒ‰ã§æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã¾ãŸ`morph search`ã‚³ãƒãƒ³ãƒ‰ã§æ¤œç´¢ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

### ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ä½œæˆæ‰‹é †

**(æ‰‹é †1) ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ**

ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã¯templatesãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã«ä½œæˆã—ã¾ã™ã€‚

ä½œæˆæ™‚ã«ã¯ä»¥ä¸‹ã®ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã‚’å®šç¾©ã§ãã¾ã™ã€‚ï¼ˆãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã§å®šç¾©ã—ãŸå€¤ã¯å¾Œè¿°ã™ã‚‹morph createã‚³ãƒãƒ³ãƒ‰ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€ç½®æ›ã—ã¦ãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã•ã‚Œã¾ã™ã€‚ï¼‰

- `${MORPH_NAME}`: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå(æ—§ã‚¨ã‚¤ãƒªã‚¢ã‚¹)ã«ç½®æ›ã•ã‚Œã¾ã™ã€‚ï¼ˆ`morph create`ã‚³ãƒãƒ³ãƒ‰ã®`--name`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®æŒ‡å®šï¼‰
- `${MORPH_DESCRIPTION}`: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆèª¬æ˜ã«ç½®æ›ã•ã‚Œã¾ã™ã€‚ï¼ˆ`morph create`ã‚³ãƒãƒ³ãƒ‰ã®`â€”-description`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®æŒ‡å®šï¼‰

E.g.)

```python
import pandas as pd

import morph
from morph import MorphGlobalContext

# morph.func is a decorator that takes in the following parameters:
# name: The identifier for the file alias. The function name will be used if not provided.
# description: The description for the function.
# output_paths: The destination paths for the output.
# output_type: The return type of the function
@morph.func(
    name="${MORPH_NAME}",
    description="${MORPH_DESCRIPTION}",
    output_paths=["_private/{name}/{now()}{ext()}"],
    output_type="dataframe",
)
def main(context: MorphGlobalContext) -> pd.DataFrame:
    return pd.DataFrame({{"key1": [3, 2, 1], "key2": [5, 4, 3]}})
```

**(æ‰‹é †2) template.yamlã®ç·¨é›†**

templatesãƒ•ã‚©ãƒ«ãƒ€ç›´ä¸‹ã®template.yamlã‚’ç·¨é›†ã—ã¾ã™ã€‚Syntaxã¯ä»¥ä¸‹ã®ä¾‹ã‚’å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚

â€»srcã¯ãƒ•ãƒ«ãƒ‘ã‚¹ã¾ãŸã¯template.yamlã‹ã‚‰ã®ç›¸å¯¾ãƒ‘ã‚¹ã§å®šç¾©ã—ã¾ã™ã€‚

E.g.)

```yaml
# [Description]
# This file is used to manage your local templates.
#
# [Syntax]
# This file is written in YAML format. The following is an example of the syntax.
#   E.g.)
#     templates:
#       - name: <template_name> [required]
#         title: <template_title>
#         description: <template_description>
#         src: <template_source> [required]
#         language: <template_language> [required|options:"python", "sql"]
#
# [Compiling]
# After editing this file, you need to compile it using the following command.
# This command will validate the syntax of the file and make sure your templates are available.
#   E.g.)
#     $ morph template compile

templates:
  - name: test
    title: Test Template
    description: This is a test template.
    src: ./python/test.py
    language: python
```

**(æ‰‹é †3) ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«**

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§template.yamlã®å¦¥å½“æ€§ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦template.yamlã®ç·¨é›†ã¾ã§çµ‚ã‚ã£ãŸã‚‰ã€VSã‚³ãƒ¼ãƒ‰ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‹ã‚‰ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å©ã„ã¦ãã ã•ã„ã€‚

```bash
$ morph template compile
$ # å®Ÿè¡Œã—ã¦ä½•ã‚‚è¡¨ç¤ºãŒãªã‘ã‚Œã°æˆåŠŸã§ã™ğŸ‰
```

### ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®åˆ©ç”¨æ–¹æ³•

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ä½œæˆã§ãã¾ã™ã€‚

â€»`<ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå>`ã¯template.yamlã§å®šç¾©ã—ãŸnameã‚’æŒ‡å®šã—ã¾ã™ã€‚ã¾ãŸã€[ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆAPI](https://queue-inc.stoplight.io/docs/morph-api-document/fhs6hbxyjjtxu-no-auth-search-template) ãŒè¿”å´ã™ã‚‹nameã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€ã‚°ãƒ­ãƒ¼ãƒãƒ«ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

```bash
# morph create <ä½œæˆã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«> â€”template <ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå>
$ morph create src/test.py --template test
```

ãã®ä»–ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã¤ã„ã¦ã¯ä»¥ä¸‹ã‚’å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚

```bash
$ morph create -h
Usage: morph create [OPTIONS] FILENAME

  Morph-cli create command.

Options:
  --template TEXT                 Specify the template name.
  --name TEXT                     Specify the function name.
  --description TEXT              Specify the function description.
  --parent-name TEXT              Specify the parent function name.
  -v, --verbose                   Enable verbose mode.
  --log-format [text|debug|json|default]
                                  Specify the format of logging to the console
                                  and the log file. Use --log-format-file to
                                  configure the format for the log file
                                  differently than the console.
  -h, --help                      Show this message and exit.
```

### ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®æ¤œç´¢

ãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§æ¤œç´¢ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ç›´æ¥ã“ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å©ãç”¨é€”ã¯ã‚ã¾ã‚Šãªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€VMã®APIã§ãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ãƒ•ãƒ­ãƒ³ãƒˆå´ã«è¿”ã™ãŸã‚ã®å®Ÿè£…ã¨ãªã£ã¦ã„ã¾ã™ã€‚

```bash
$ morph template search -h
Usage: morph template search [OPTIONS]

  Search templates.

Options:
  --name TEXT                     Specify the local template name.
  --language TEXT                 Specify the local template language.
  --query TEXT                    Specify the search query.
  --limit INTEGER                 Specify the limit. [default: 20]
  --skip INTEGER                  Specify the skip. [default: 0]
  --log-format [text|debug|json|default]
                                  Specify the format of logging to the console
                                  and the log file. Use --log-format-file to
                                  configure the format for the log file
                                  differently than the console.
  -v, --verbose                   Enable verbose mode.
  -h, --help                      Show this message and exit.
```