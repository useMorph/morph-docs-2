---
title: '変数を使う'
icon: "code"
---

### SQL

Morphではvariablesを使うことで、runした際の引数をSQL内で使用することができます。

`{{ }}`で囲うと変数とみなされrunした際の引数がここに入るようになっています。この引数はMDXでのデータアプリケーションなど動的なアプリケーションを構築するために使用します。

引数は実際にMorphのCLIでは以下のようなコマンドで実行されます。Codeのタブで実行された場合には、この引数は追加されないのでデフォルトの値を指定する必要があります。

`morph run user -d user_type=admin`

-dでvariablesを指定することができます。

```sql
{{
	config(
		name="user",
		description="User",
	)
}}

{% if user_type %}
# user_typeが送られたときに発行されるSQL
# 通常のSQLと同様に指定の値はシングルクオートで囲む必要あり(dbの文法による)
select * from user where user_type = '{{ user_type }}'
{% else %}
# user_typeの指定がないときに発行されるSQL
select * from user
{% endif %}
```

### Python

`@morph.variables`のアノテーションで外部から渡す変数を宣言することができます。

```python
@morph.variables(
    var_name: str, default: Optional[Any] = None
)
def func_name(context):
	# write your code here
```

## Parameters

<ParamField body="var_name" type="string" required>
関数の実行時の引数を追加できる。

mdxファイルから引数を渡したり、コマンド実行時に引数を指定できます。
</ParamField>

<ParamField body="default" type="any">
デフォルト値を設定できる。

指定しない場合はデフォルト値がNoneになります。
</ParamField>

## 使用例

```python
@morph.func
@morph.variables("var1")
def get_data_from_database(context):
	var1_data = context.vars["var1"]
    # write your code here using var1_data
	return pd.DataFrame({})
```